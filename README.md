# 3D CT切片生成器

从3D CT图像中生成多个候选2D切片的工具，支持平移和旋转变换。

## 功能特性

- ✅ 支持多种医学图像格式（NIfTI、DICOM系列）
- ✅ 法向平移：±5mm范围，2.5mm步长
- ✅ 双轴旋转：±90度范围，45度步长
- ✅ 生成5×5×5=125个候选平面
- ✅ 高质量图像重采样（线性插值）
- ✅ 自动保存切片图像
- ✅ 可视化样本展示
- ✅ 灵活的配置系统

## 安装依赖

```bash
pip install -r requirements.txt
```

## 快速开始

### 1. 准备CT图像

将你的CT图像放在项目目录中，支持以下格式：
- NIfTI格式：`.nii` 或 `.nii.gz`
- DICOM系列：一个包含DICOM文件的文件夹

### 2. 配置参数

编辑 `config.py` 文件，设置以下参数：

```python
# CT图像路径
CT_IMAGE_PATH = "data/ct_image.nii.gz"

# 初始平面中心点（mm）
CENTER_POINT = (0.0, 0.0, 0.0)

# 初始平面法向量
NORMAL_VECTOR = (0.0, 0.0, 1.0)  # 轴向平面
```

### 3. 运行程序

```bash
python main.py
```

程序将生成125个切片并保存到 `output_slices/` 目录。

## 详细说明

### 坐标系统

- **物理坐标**：使用图像的物理空间坐标（mm）
- **法向量**：定义切片平面的方向
  - `(0, 0, 1)` - 轴向平面（Axial）
  - `(0, 1, 0)` - 冠状平面（Coronal）
  - `(1, 0, 0)` - 矢状平面（Sagittal）

### 变换参数

#### 平移参数
- **范围**：±5mm
- **步长**：2.5mm
- **生成位置**：-5, -2.5, 0, 2.5, 5（共5个）

#### 旋转参数
- **范围**：±90度
- **步长**：45度
- **旋转轴**：两个垂直于法向的正交轴
- **生成角度**：-90, -45, 0, 45, 90（每轴5个）

#### 总平面数
5（平移）× 5（X轴旋转）× 5（Y轴旋转）= **125个候选平面**

### 输出文件

每个切片保存为PNG图像，文件名格式：